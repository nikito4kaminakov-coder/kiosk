<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–õ–∏—Ü–µ–π</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
    --green:#1e7f4f;
    --green-light:#3ddc84;
    --accent:#00ffb3;
    --glass:rgba(0,0,0,0.2); /* –µ—â—ë –ø—Ä–æ–∑—Ä–∞—á–Ω–µ–µ */
}

/* ===== –û–ë–©–ò–ï –°–¢–ò–õ–ò ===== */
*{box-sizing:border-box}
html{scroll-behavior:auto;}
body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    min-height:100vh;
    background:#0b1511;
    color:white;
    overflow-x:hidden;
}

.background{
    position:fixed;
    inset:0;
    background:url("school.jpg") center/cover no-repeat;
    filter:brightness(.75) contrast(1.1) saturate(1.15);
    z-index:-2;
}

.overlay{
    position:fixed;
    inset:0;
    background:linear-gradient(135deg,rgba(0,0,0,.45),rgba(0,50,30,.35));
    z-index:-1;
}

.logo{
    position:fixed;
    top:25px;
    left:25px;
    width:110px;
    z-index:5;
    opacity:.95;
    transition:opacity .2s;
}
.logo:hover{opacity:1;}

/* ===== –ß–ê–°–´ (–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω) ===== */
.clock{
    position:fixed;
    top:25px;
    right:25px;
    font-size:48px;
    font-weight:700;
    color:#00ffb3;
    z-index:5;
    background:rgba(0,0,0,.3);
    padding:10px 20px;
    border-radius:15px;
    font-family:'Orbitron', sans-serif;
    letter-spacing:1px;
    text-shadow:0 0 4px #00ffb3;
}

/* ===== –¢–ê–ô–ú–ï–† –î–û –ó–í–û–ù–ö–ê ===== */
.next-bell-timer{
    position:fixed;
    top:120px;
    right:25px;
    font-size:32px;
    font-weight:600;
    color:#00ffb3;
    font-family:'Orbitron', sans-serif;
    letter-spacing:1px;
    text-shadow:0 0 4px #00ffb3;
    z-index:5;
    transition:color 0.3s;
}
.next-bell-timer.warning{
    color:#ff4444;
    text-shadow:0 0 8px #ff4444;
    animation: blink 0.5s ease-in-out infinite alternate;
}
@keyframes blink{
    from{opacity:1;}
    to{opacity:0.8;}
}

/* ===== –ú–ï–ù–Æ ===== */
.app{
    position:relative;
    z-index:2;
    height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    text-align:center;
    animation:fadeIn 1.2s ease;
}

h1{
    font-size:70px;
    margin-bottom:60px;
    text-shadow:0 10px 30px rgba(0,0,0,.7);
    letter-spacing:2px;
}

.menu{
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));
    gap:25px;
    width:90%;
    max-width:1000px;
    justify-items:center;
}

.menu button{
    width:220px;
    height:65px;
    border:none;
    border-radius:35px;
    font-size:18px;
    font-weight:600;
    color:white;
    cursor:pointer;
    background:linear-gradient(135deg,var(--green),#0f5a35);
    box-shadow:0 5px 15px rgba(0,0,0,.6);
    transition:all .2s ease;
    padding:0 15px;
}
.menu button:hover{
    transform:translateY(-4px) scale(1.03);
    box-shadow:0 10px 25px rgba(0,0,0,.8);
}

/* ===== –°–¢–†–ê–ù–ò–¶–ê ===== */
.page{
    position:absolute;
    inset:0;
    padding:120px 100px;
    overflow:auto;
    display:none;
}

.page.active{
    display:block;
    animation:pageIn .5s ease;
}

@keyframes pageIn{
    from{opacity:0;}
    to{opacity:1;}
}

.card{
    background:var(--glass);
    border-radius:35px;
    padding:60px;
    box-shadow:0 20px 50px rgba(0,0,0,.6);
    font-size:20px;
    line-height:1.6;
}

/* ===== Reveal ===== */
.reveal{
    opacity:0;
    transition:opacity .5s ease;
}
.reveal.visible{
    opacity:1;
}

/* ===== –ù–æ–≤–æ—Å—Ç–∏ ===== */
.news-card{
    margin-top:50px;
    padding:35px;
    border-radius:28px;
    background:rgba(0,0,0,0.3); /* –ø—Ä–æ–∑—Ä–∞—á–Ω–µ–µ */
    box-shadow:0 10px 30px rgba(0,0,0,.6);
    transition:transform .2s;
}
.news-card:hover{transform:translateY(-3px);}
.news-date{font-size:14px; opacity:.7; margin-bottom:15px;}
.news-text{font-size:17px; line-height:1.7;}
.gallery{
    margin-top:20px;
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
    gap:18px;
}
.gallery img{
    width:100%;
    border-radius:18px;
    cursor:pointer;
    transition:transform .2s;
}
.gallery img:hover{transform:scale(1.05);}

/* ===== –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è ===== */
.schedule-grid{
    display:flex;
    justify-content:center;
    gap:40px;
    flex-wrap:wrap;
    margin-top:30px;
}
.schedule-item{
    width:min(450px,100%);
    text-align:center;
}
.schedule-item p{
    margin:0 0 15px 0;
    font-size:1.4rem;
    font-weight:600;
    color:var(--accent);
    text-shadow:0 2px 5px rgba(0,0,0,0.5);
}
.schedule-item img{
    width:100%;
    height:auto;
    border-radius:25px;
    cursor:pointer;
    transition:transform 0.2s;
    box-shadow:0 10px 25px rgba(0,0,0,0.5);
}
.schedule-item img:hover{
    transform:scale(1.02);
}

/* ===== –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ú–µ–Ω—é ===== */
.food-container{
    display:flex;
    flex-direction:column;
    gap:50px;
    margin-top:30px;
}
.food-cycle{
    background:rgba(0,0,0,0.3); /* –ø—Ä–æ–∑—Ä–∞—á–Ω–µ–µ */
    border-radius:30px;
    padding:30px;
    transition:transform .2s;
}
.food-cycle:hover{
    transform:translateY(-3px);
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
}
.food-cycle h3{
    color:var(--accent);
    font-size:2rem;
    margin:0 0 30px 0;
    text-shadow:0 2px 5px rgba(0,0,0,0.5);
    text-align:center;
    border-bottom:2px solid var(--green-light);
    padding-bottom:10px;
}
.meal{
    margin-bottom:40px;
    display:flex;
    flex-direction:column;
    align-items:center;
}
.meal:last-child{
    margin-bottom:0;
}
.meal-title{
    font-size:2rem;
    color:var(--accent);
    margin:0 0 20px 0;
    text-align:center;
    width:100%;
}
.meal img{
    width:100%;
    max-width:500px;
    border-radius:25px;
    cursor:pointer;
    margin-bottom:15px;
    box-shadow:0 5px 15px rgba(0,0,0,0.6);
    transition:transform 0.2s;
}
.meal img:hover{
    transform:scale(1.02);
}
.meal p{
    font-size:1.2rem;
    line-height:1.6;
    text-align:center;
    max-width:600px;
    margin:0;
    background:rgba(0,0,0,0.3);
    padding:15px 20px;
    border-radius:30px;
}

/* ===== –õ–∞–π—Ç–±–æ–∫—Å ===== */
.lightbox{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.9);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:100;
    animation:fadeIn .2s ease;
}
.lightbox img{
    max-width:90%;
    max-height:90%;
    border-radius:25px;
    animation:zoomIn .2s ease;
}
@keyframes zoomIn{from{opacity:0}to{opacity:1}}

.timer-wrapper{
    display:flex;
    gap:35px;
    justify-content:center;
    margin-top:50px;
    flex-wrap:wrap;
}
.time-box{
    background:rgba(0,0,0,.5);
    padding:35px 50px;
    border-radius:30px;
    text-align:center;
    box-shadow:0 10px 30px rgba(0,0,0,.7);
    transition:transform .2s;
}
.time-box:hover{transform:scale(1.05);}
.time-box span{display:block; font-size:52px; font-weight:700; color:var(--accent);}

.back{
    position:fixed;
    top:30px;
    right:30px;
    padding:12px 22px;
    border-radius:25px;
    border:none;
    background:var(--green);
    color:white;
    cursor:pointer;
    display:none;
}

@keyframes fadeIn{from{opacity:0}to{opacity:1}}
</style>
</head>
<body>

<div class="background" id="bg"></div>
<div class="overlay"></div>
<img src="logo.png" class="logo">
<div class="clock" id="clock">00:00:00</div>
<div class="next-bell-timer" id="nextBellTimer">–î–æ –∑–≤–æ–Ω–∫–∞: --:--</div>

<div class="app" id="mainApp">
<h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h1>
<div class="menu">
<button onclick="openPage('news')">–ù–æ–≤–æ—Å—Ç–∏</button>
<button onclick="openPage('about')">–û —à–∫–æ–ª–µ</button>
<button onclick="openPage('projects')">–ù–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã</button>
<button onclick="openPage('olymp')">–û–ª–∏–º–ø–∏–∞–¥—ã</button>
<button onclick="openPage('safety')">–î–Ω–∏ –±–µ–∑ —Ç—Ä–∞–≤–º</button>
<button onclick="openPage('holidays')">–î–æ –∫–∞–Ω–∏–∫—É–ª</button>
<button onclick="openPage('schedule')">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
<button onclick="openPage('food')">–ú–µ–Ω—é</button>
</div>
</div>

<div id="page" class="page"></div>
<button class="back" id="backBtn" onclick="closePage()">–ù–∞–∑–∞–¥</button>

<script>
// ===== –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ =====
const GROUP_ID = 145279634;
const TOKEN = "a27a5ad4a27a5ad4a27a5ad40ca144bedfaa27aa27a5ad4cbea966411d118bc47d271c6";
const page=document.getElementById("page");
const main=document.getElementById("mainApp");
const backBtn=document.getElementById("backBtn");
const bg=document.getElementById("bg");
const clockEl=document.getElementById("clock");
const timerEl = document.getElementById("nextBellTimer");
let idleTimeout, timerInterval, holidaysTimerInterval, bellTimerInterval;
const startDate=new Date("2026-01-01T00:00:00");
const holidaysDate=new Date("2026-02-23T00:00:00");

// ===== –¢–û–ß–ù–û–ï –†–ê–°–ü–ò–°–ê–ù–ò–ï –ó–í–û–ù–ö–û–í =====
const startTimes = [
    8*3600+30*60,  // 8:30
    9*3600+20*60,  // 9:20
    10*3600+15*60, // 10:15
    11*3600+5*60,  // 11:05
    11*3600+55*60, // 11:55
    12*3600+50*60, // 12:50
    13*3600+40*60, // 13:40
    14*3600+30*60, // 14:30
    15*3600+15*60, // 15:15
    16*3600        // 16:00
];

const endTimes = [
    9*3600+10*60,  // 9:10
    10*3600+0*60,  // 10:00
    10*3600+55*60, // 10:55
    11*3600+45*60, // 11:45
    12*3600+35*60, // 12:35
    13*3600+30*60, // 13:30
    14*3600+20*60, // 14:20
    15*3600+10*60, // 15:10
    15*3600+55*60, // 15:55
    16*3600+40*60  // 16:40
];

let events = [...startTimes, ...endTimes];
events.sort((a, b) => a - b);

// ===== –¢–∞–π–º–µ—Ä –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –∑–≤–æ–Ω–∫–∞ =====
function updateBellTimer() {
    const now = new Date();
    const nowSec = now.getHours()*3600 + now.getMinutes()*60 + now.getSeconds();
    
    let nextEventSec = events.find(sec => sec > nowSec);
    if (nextEventSec === undefined) {
        nextEventSec = events[0] + 24*3600;
    }
    
    let diffSec = nextEventSec - nowSec;
    if (diffSec < 0) diffSec += 24*3600;
    
    const minutes = Math.floor(diffSec / 60);
    const seconds = diffSec % 60;
    const timeStr = `${minutes}:${seconds.toString().padStart(2,'0')}`;
    
    timerEl.textContent = `–î–æ –∑–≤–æ–Ω–∫–∞: ${timeStr}`;
    
    if (diffSec <= 30) {
        timerEl.classList.add('warning');
    } else {
        timerEl.classList.remove('warning');
    }
}

updateBellTimer();
bellTimerInterval = setInterval(updateBellTimer, 1000);

// ===== –§—É–Ω–∫—Ü–∏—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è HTML =====
function escapeHTML(str) {
    return str.replace(/[&<>"']/g, function(m) {
        if (m === '&') return '&amp;';
        if (m === '<') return '&lt;';
        if (m === '>') return '&gt;';
        if (m === '"') return '&quot;';
        if (m === "'") return '&#039;';
        return m;
    });
}

// ===== –î–ê–ù–ù–´–ï –î–õ–Ø –°–¢–†–ê–ù–ò–¶–´ –ú–ï–ù–Æ (10 —Ü–∏–∫–ª–æ–≤) =====
const cycles = [
    {
        breakfastImg: "breakfast1.jpg",
        breakfastText: `–ë–ª–∏–Ω—ã, –º–æ–ª–æ–∫–æ —Å–≥—É—â–µ–Ω–Ω–æ–µ c —Å–∞—Ö–∞—Ä–æ–º, —Å–æ—É—Å —è–≥–æ–¥–Ω—ã–π, —Å—ã—Ä –ø–æ–ª—É—Ç–≤–µ—Ä–¥—ã–π, —á–∞–π —Å —Å–∞—Ö–∞—Ä–æ–º, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞, —Ñ—Ä—É–∫—Ç—ã —Å–≤–µ–∂–∏–µ –ø–æ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏`,
        lunchImg: "lunch1.jpg",
        lunchText: `–û–≥—É—Ä—Ü—ã —Å–æ–ª–µ–Ω—ã–µ, —Å–≤–µ–∫–ª–∞ –æ—Ç–≤–∞—Ä–Ω–∞—è, –º–æ—Ä–∫–æ–≤—å —Å–≤–µ–∂–∞—è / –∫—É–∫—É—Ä—É–∑–∞ –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, —Å—É–ø ¬´–ú–∏–Ω–µ—Å—Ç—Ä–æ–Ω–µ¬ª, –ø–µ—á–µ–Ω—å –ø–æ-—Å—Ç—Ä–æ–≥–∞–Ω–æ–≤—Å–∫–∏, –ø—é—Ä–µ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ, —Å–æ–∫, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`
    },
    {
        breakfastImg: "breakfast2.jpg",
        breakfastText: `–ö–∞—à–∞ ¬´–î—Ä—É–∂–±–∞¬ª, —Å–æ—É—Å —è–≥–æ–¥–Ω—ã–π, —á–∞–π —Å —Å–∞—Ö–∞—Ä–æ–º, –π–æ–≥—É—Ä—Ç —Ñ—Ä—É–∫—Ç–æ–≤—ã–π, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`,
        lunchImg: "lunch2.jpg",
        lunchText: `–ü–æ–º–∏–¥–æ—Ä—ã, –∫–∞–ø—É—Å—Ç–∞ –ø–µ–∫–∏–Ω—Å–∫–∞—è, –æ–≥—É—Ä—Ü—ã —Å–≤–µ–∂–∏–µ, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –±–æ—Ä—â —Å –∫–∞–ø—É—Å—Ç–æ–π –∏ –∫–∞—Ä—Ç–æ—Ñ–µ–ª–µ–º, –≥–æ–≤—è–¥–∏–Ω–∞ –ø–æ-–º–µ–∫—Å–∏–∫–∞–Ω—Å–∫–∏, –≥—Ä–µ—á–∫–∞ –æ—Ç–≤–∞—Ä–Ω–∞—è —Ä–∞—Å—Å—ã–ø—á–∞—Ç–∞—è, –∫–æ–º–ø–æ—Ç –∏–∑ –ø–ª–æ–¥–æ–≤ —Å—É—Ö–∏—Ö, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`
    },
    {
        breakfastImg: "breakfast3.jpg",
        breakfastText: `–ü—É–¥–∏–Ω–≥ –∏–∑ —Ç–≤–æ—Ä–æ–≥–∞ –∑–∞–ø–µ—á–µ–Ω–Ω—ã–π, –º–æ–ª–æ–∫–æ —Å–≥—É—â–µ–Ω–Ω–æ–µ c —Å–∞—Ö–∞—Ä–æ–º, —Å–æ—É—Å —è–≥–æ–¥–Ω—ã–π, –∫–∞–∫–∞–æ –Ω–∞ –º–æ–ª–æ–∫–µ, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞, —Ñ—Ä—É–∫—Ç—ã —Å–≤–µ–∂–∏–µ –ø–æ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏`,
        lunchImg: "lunch3.jpg",
        lunchText: `–û–≥—É—Ä—Ü—ã —Å–≤–µ–∂–∏–µ, –º–æ—Ä–∫–æ–≤—å —Å–≤–µ–∂–∞—è / –∫—É–∫—É—Ä—É–∑–∞ –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, –∫–∞–ø—É—Å—Ç–∞ —Å–≤–µ–∂–∞—è / –≥–æ—Ä–æ—à–µ–∫ –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, —Å—É–ø –≥–æ—Ä–æ—Ö–æ–≤—ã–π, —à–Ω–∏—Ü–µ–ª—å —Ä—É–±–ª–µ–Ω—ã–π –∫—É—Ä–∏–Ω—ã–π, –º–∞–∫–∞—Ä–æ–Ω—ã –æ—Ç–≤–∞—Ä–Ω—ã–µ —Å –æ–≤–æ—â–∞–º–∏, —Å–æ–∫, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`
    },
    {
        breakfastImg: "breakfast4.jpg",
        breakfastText: `–•–ª–æ–ø—å—è —Å–ª–∞–¥–∫–∏–µ —Å –º–æ–ª–æ–∫–æ–º, —Å—ã—Ä –ø–æ–ª—É—Ç–≤–µ—Ä–¥—ã–π, —á–∞–π —Å —Å–∞—Ö–∞—Ä–æ–º, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞, —Ñ—Ä—É–∫—Ç—ã —Å–≤–µ–∂–∏–µ –ø–æ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏, –ø–µ—á–µ–Ω—å–µ`,
        lunchImg: "lunch4.jpg",
        lunchText: `–ü–æ–º–∏–¥–æ—Ä—ã, –∫–∞–ø—É—Å—Ç–∞ —Å–≤–µ–∂–∞—è / –≥–æ—Ä–æ—à–µ–∫ –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –æ–≥—É—Ä—Ü—ã —Å–≤–µ–∂–∏–µ, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, —Å—É–ø –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–π —Å —Ä–∏—Å–æ–º, –∫–æ—Ç–ª–µ—Ç—ã —Ä—ã–±–Ω—ã–µ, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å –æ—Ç–≤–∞—Ä–Ω–æ–π —Å –∑–µ–ª–µ–Ω—å—é, –∫–∏—Å–µ–ª—å –∏–∑ —Å–º–æ—Ä–æ–¥–∏–Ω—ã, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`
    },
    {
        breakfastImg: "breakfast5.jpg",
        breakfastText: `–û–º–ª–µ—Ç, —Ñ—Ä—É–∫—Ç—ã —Å–≤–µ–∂–∏–µ –ø–æ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏, –∫–∞–∫–∞–æ –Ω–∞ –º–æ–ª–æ–∫–µ, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞, –º–∞—Å–ª–æ (–ø–æ—Ä—Ü–∏—è–º–∏)`,
        lunchImg: "lunch5.jpg",
        lunchText: `–û–≥—É—Ä—Ü—ã —Å–æ–ª–µ–Ω—ã–µ, —Å–≤–µ–∫–ª–∞ –æ—Ç–≤–∞—Ä–Ω–∞—è, –º–æ—Ä–∫–æ–≤—å —Å–≤–µ–∂–∞—è / –∫—É–∫—É—Ä—É–∑–∞ –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, —Å—É–ø –≥–æ—Ä–æ—Ö–æ–≤—ã–π, –ø–µ–ª—å–º–µ–Ω–∏ –æ—Ç–≤–∞—Ä–Ω—ã–µ, —Å–æ–∫, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`
    },
    {
        breakfastImg: "breakfast6.jpg",
        breakfastText: `–í–∞—Ä–µ–Ω–∏–∫–∏ —Å —Ç–≤–æ—Ä–æ–≥–æ–º, –º–æ–ª–æ–∫–æ —Å–≥—É—â–µ–Ω–Ω–æ–µ c —Å–∞—Ö–∞—Ä–æ–º, —Å–æ—É—Å —è–≥–æ–¥–Ω—ã–π, —Å—ã—Ä –ø–æ–ª—É—Ç–≤–µ—Ä–¥—ã–π, —á–∞–π —Å —Å–∞—Ö–∞—Ä–æ–º, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞, —Ñ—Ä—É–∫—Ç—ã —Å–≤–µ–∂–∏–µ –ø–æ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏`,
        lunchImg: "lunch6.jpg",
        lunchText: `–ü–æ–º–∏–¥–æ—Ä—ã, –∫–∞–ø—É—Å—Ç–∞ –ø–µ–∫–∏–Ω—Å–∫–∞—è, –æ–≥—É—Ä—Ü—ã —Å–≤–µ–∂–∏–µ, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, —Ä–∞—Å—Å–æ–ª—å–Ω–∏–∫, –±–∏—Ç–æ—á–∫–∏ —Ä—É–±–ª–µ–Ω—ã–µ –∫—É—Ä–∏–Ω—ã–µ, –∫–∞–ø—É—Å—Ç–∞ —Ç—É—à–µ–Ω–∞—è, –∫–æ–º–ø–æ—Ç –∏–∑ –ø–ª–æ–¥–æ–≤ —Å–≤–µ–∂–∏—Ö (—è–±–ª–æ–∫–∏), —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`
    },
    {
        breakfastImg: "breakfast7.jpg",
        breakfastText: `–û–º–ª–µ—Ç, –∫–µ–∫—Å —Å —Ü—É–∫–∞—Ç–∞–º–∏, –∫–∞–∫–∞–æ –Ω–∞ –º–æ–ª–æ–∫–µ, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`,
        lunchImg: "lunch7.jpg",
        lunchText: `–û–≥—É—Ä—Ü—ã —Å–æ–ª–µ–Ω—ã–µ, —Å–≤–µ–∫–ª–∞ –æ—Ç–≤–∞—Ä–Ω–∞—è, –º–æ—Ä–∫–æ–≤—å —Å–≤–µ–∂–∞—è / –∫—É–∫—É—Ä—É–∑–∞ –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, —Å—É–ø –∫—É—Ä–∏–Ω—ã–π, —Ä–∞–≥—É –∏–∑ –º—è—Å–∞ –ø—Ç–∏—Ü—ã (–∫—É—Ä–∏—Ü–∞), —Å–æ–∫, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`
    },
    {
        breakfastImg: "breakfast8.jpg",
        breakfastText: `–ö–∞—à–∞ –≥—Ä–µ—á–Ω–µ–≤–∞—è —Å –º–æ–ª–æ–∫–æ–º, —Å–æ—É—Å —è–≥–æ–¥–Ω—ã–π, –∫—Ä—É–∞—Å—Å–∞–Ω, —á–∞–π —Å —Å–∞—Ö–∞—Ä–æ–º, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞, —Ñ—Ä—É–∫—Ç—ã —Å–≤–µ–∂–∏–µ –ø–æ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏`,
        lunchImg: "lunch8.jpg",
        lunchText: `–ü–æ–º–∏–¥–æ—Ä—ã, –∫–∞–ø—É—Å—Ç–∞ –ø–µ–∫–∏–Ω—Å–∫–∞—è, –æ–≥—É—Ä—Ü—ã —Å–≤–µ–∂–∏–µ, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –±–æ—Ä—â ¬´–°–∏–±–∏—Ä—Å–∫–∏–π¬ª, –∫–æ—Ç–ª–µ—Ç—ã —Ä—ã–±–Ω—ã–µ, –º–∞–∫–∞—Ä–æ–Ω—ã –æ—Ç–≤–∞—Ä–Ω—ã–µ —Å –æ–≤–æ—â–∞–º–∏, –∫–æ–º–ø–æ—Ç –∏–∑ –ø–ª–æ–¥–æ–≤ —Å—É—Ö–∏—Ö, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`
    },
    {
        breakfastImg: "breakfast9.jpg",
        breakfastText: `–°—É–ø –º–æ–ª–æ—á–Ω—ã–π —Å –≤–µ—Ä–º–∏—à–µ–ª—å—é, —Å–æ—É—Å —è–≥–æ–¥–Ω—ã–π, —á–∞–π —Å —Å–∞—Ö–∞—Ä–æ–º, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞, —Å—ã—Ä –ø–æ–ª—É—Ç–≤–µ—Ä–¥—ã–π, –π–æ–≥—É—Ä—Ç —Ñ—Ä—É–∫—Ç–æ–≤—ã–π`,
        lunchImg: "lunch9.jpg",
        lunchText: `–û–≥—É—Ä—Ü—ã —Å–≤–µ–∂–∏–µ, –º–æ—Ä–∫–æ–≤—å —Å–≤–µ–∂–∞—è / –∫—É–∫—É—Ä—É–∑–∞ –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–∞—è, –∫–∞–ø—É—Å—Ç–∞ —Å–≤–µ–∂–∞—è / –≥–æ—Ä–æ—à–µ–∫ –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, —Å—É–ø ¬´–ú–∏–Ω–µ—Å—Ç—Ä–æ–Ω–µ¬ª, —à–Ω–∏—Ü–µ–ª—å —Ä—É–±–ª–µ–Ω—ã–π –∫—É—Ä–∏–Ω—ã–π, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å –æ—Ç–≤–∞—Ä–Ω–æ–π —Å –∑–µ–ª–µ–Ω—å—é, —Å–æ–∫, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`
    },
    {
        breakfastImg: "breakfast10.jpg",
        breakfastText: `–ö–∞—à–∞ ¬´–î—Ä—É–∂–±–∞¬ª, –∫–æ—Ñ–µ–π–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ –∑–ª–∞–∫–æ–≤—ã–π –Ω–∞ –º–æ–ª–æ–∫–µ, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞, —Ñ—Ä—É–∫—Ç—ã —Å–≤–µ–∂–∏–µ –ø–æ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏, –ø–µ—á–µ–Ω—å–µ`,
        lunchImg: "lunch10.jpg",
        lunchText: `–ü–æ–º–∏–¥–æ—Ä—ã, –∫–∞–ø—É—Å—Ç–∞ —Å–≤–µ–∂–∞—è / –≥–æ—Ä–æ—à–µ–∫ –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –æ–≥—É—Ä—Ü—ã —Å–≤–µ–∂–∏–µ, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, —â–∏ ¬´–ù–æ–≤–≥–æ—Ä–æ–¥—Å–∫–∏–µ¬ª, –ø–µ–ª—å–º–µ–Ω–∏ –æ—Ç–≤–∞—Ä–Ω—ã–µ, –∫–∏—Å–µ–ª—å –∏–∑ –≤–∏—à–Ω–∏, —Ö–ª–µ–±–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞`
    }
];

// ===== Reveal =====
const observer=new IntersectionObserver(entries=>{ entries.forEach(entry=>{ if(entry.isIntersecting){ entry.target.classList.add("visible"); }});},{threshold:0.15});
function observeElements(){ document.querySelectorAll(".reveal").forEach(el=>observer.observe(el)); }

// ===== –¢–∞–π–º–µ—Ä—ã =====
function updateSafetyTimer(){
    const now=new Date(); const diff=now-startDate;
    document.getElementById("days").innerText=Math.floor(diff/(1000*60*60*24));
    document.getElementById("hours").innerText=Math.floor((diff/(1000*60*60))%24);
    document.getElementById("minutes").innerText=Math.floor((diff/(1000*60))%60);
    document.getElementById("seconds").innerText=Math.floor((diff/1000)%60);
}
function startTimer(){ updateSafetyTimer(); clearInterval(timerInterval); timerInterval=setInterval(updateSafetyTimer,1000); }

function updateHolidaysTimer(){
    const now=new Date(); let diff=holidaysDate-now; if(diff<0) diff=0;
    document.getElementById("holidaysDays").innerText=Math.floor(diff/(1000*60*60*24));
    document.getElementById("holidaysHours").innerText=Math.floor((diff/(1000*60*60))%24);
    document.getElementById("holidaysMinutes").innerText=Math.floor((diff/(1000*60))%60);
    document.getElementById("holidaysSeconds").innerText=Math.floor((diff/1000)%60);
}
function startHolidaysTimer(){ updateHolidaysTimer(); clearInterval(holidaysTimerInterval); holidaysTimerInterval=setInterval(updateHolidaysTimer,1000); }

// ===== –ß–∞—Å—ã –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω =====
function updateClock(){ const now=new Date(); clockEl.innerText=`${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`; }
updateClock(); setInterval(updateClock,1000);

// ===== –¢–∞–π–º–µ—Ä –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è =====
function setupIdleTimer(){ clearTimeout(idleTimeout);
    document.addEventListener("mousemove",resetIdleTimer);
    document.addEventListener("keydown",resetIdleTimer);
    document.addEventListener("touchstart",resetIdleTimer);
    startIdleTimer();
}
function startIdleTimer(){ idleTimeout=setTimeout(()=>{ if(page.classList.contains("active")) closePage(); },60000); }
function resetIdleTimer(){ clearTimeout(idleTimeout); startIdleTimer(); }

// ===== –°—Ç—Ä–∞–Ω–∏—Ü—ã =====
function openPage(type){
    main.style.display="none"; page.classList.add("active"); backBtn.style.display="block"; 
    clockEl.style.display="none"; 
    timerEl.style.display="none";
    page.innerHTML=""; 
    setupIdleTimer();

    if(type==="news"){ 
        page.innerHTML=`<div class="card"><h2>–ù–æ–≤–æ—Å—Ç–∏</h2><div id="newsContainer">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div>`; 
        loadNews(); 
    }
    if(type==="about"){ 
        page.innerHTML=`<div class="card reveal"><h2>–û —à–∫–æ–ª–µ</h2><p>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤: 99 —á–µ–ª–æ–≤–µ–∫<br>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏: 5 —á–µ–ª–æ–≤–µ–∫<br>–ü–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–π —Å–æ—Å—Ç–∞–≤: 94 —á–µ–ª–æ–≤–µ–∫–∞<br>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞—Å—Å–æ–≤: 36<br>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—É—á–∞—é—â–∏—Ö—Å—è: 1002</p></div>`; 
        observeElements(); 
        page.scrollTop = 0;
    }
    if(type==="projects"){ 
        page.innerHTML=`<div class="card reveal"><h2>–ù–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã</h2><p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞.</p></div>`; 
        observeElements(); 
        page.scrollTop = 0;
    }
    
    if(type==="olymp"){
        page.innerHTML=`<div class="card reveal"><h2>–û–ª–∏–º–ø–∏–∞–¥—ã</h2>
        <p>–ò—Å—Ç–æ—Ä–∏—è —É—Å–ø–µ—Ö–∞! üìú‚ú®<br><br>
        –ü–æ–¥–≤–µ–¥–µ–Ω—ã –∏—Ç–æ–≥–∏ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –í—Å–û–® –ø–æ –∏—Å—Ç–æ—Ä–∏–∏.<br>
        –ù–∞—à–∏ –ª–∏—Ü–µ–∏—Å—Ç—ã ‚Äî –º–æ–ª–æ–¥—Ü—ã!<br><br>
        <strong>–ü–û–ë–ï–î–ò–¢–ï–õ–¨:</strong><br>
        –í–∞—Ä–≤–∞—Ä–∞ –ë–µ–ª–æ–≤–∞ (10–ê) ‚Äî –±—Ä–∞–≤–æ! üëë<br><br>
        <strong>–ü–†–ò–ó–Å–†–´:</strong><br>
        ü•à–ú–∞—Ç–≤–µ–π –ì—É—Å–µ–≤ (8–ë)<br>
        ü•à–ê—Ä–∏–Ω–∞ –ñ—É–∫–æ–≤–∞ (9–í)<br>
        ü•à–í–∞–ª–µ—Ä–∏—è –ù–∏–∫—É–ª–∏–Ω–∞ (11–ê)<br>
        ü•à–ï–≤–≥–µ–Ω–∏—è –Æ—Å–æ–≤–∞ (9–ë)</p>
        <p><strong>–ù–∞—Å—Ç–∞–≤–Ω–∏–∫:</strong> –°–æ–ª–æ–≤—å–µ–≤–∞ –ú–∞—Ä–∏—è –Æ—Ä—å–µ–≤–Ω–∞</p>

        <hr style="margin: 40px 0; border: none; height: 2px; background: linear-gradient(90deg, transparent, var(--accent), transparent);">

        <p>üèÜ –ó–û–õ–û–¢–û–ô –°–û–°–¢–ê–í: –£–ß–ï–ù–ò–ö–ò + –£–ß–ò–¢–ï–õ–¨</p>
        <p>–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø –í—Å–û–® –ø–æ –æ–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏—é –ø–æ–∑–∞–¥–∏, –∏ —É –Ω–∞—Å –æ—Ç–ª–∏—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏!</p>
        <p>–¢—Ä–∏ —É—á–µ–Ω–∏–∫–∞ –Ω–∞—à–µ–π —à–∫–æ–ª—ã —Å—Ç–∞–ª–∏ –ü–†–ò–ó–ï–†–ê–ú–ò:<br>
        üåü –ò–ª—å—è –ö–æ—Ä–æ–ª—å–∫–æ–≤ (9–í)<br>
        üåü –ö–∞—Ä–∏–Ω–∞ –ù–∞—É–º–µ–Ω–∫–æ (10–ê)<br>
        üåü –í–∞–ª–µ—Ä–∏—è –ù–∏–∫—É–ª–∏–Ω–∞ (11–ê)</p>
        <p><strong>–ù–∞—Å—Ç–∞–≤–Ω–∏–∫:</strong> –õ–∞–≥–æ–¥–∞ –í–∞–ª–µ—Ä–∏—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–Ω–∞</p>
        </div>`;
        observeElements();
        page.scrollTop = 0;
    }

    if(type==="safety"){ 
        page.innerHTML=`<div class="card reveal"><h2>–î–Ω–∏ –±–µ–∑ —Ç—Ä–∞–≤–º</h2><div class="timer-wrapper"><div class="time-box"><span id="days">0</span><label>–î–ù–ï–ô</label></div><div class="time-box"><span id="hours">0</span><label>–ß–ê–°–û–í</label></div><div class="time-box"><span id="minutes">0</span><label>–ú–ò–ù–£–¢</label></div><div class="time-box"><span id="seconds">0</span><label>–°–ï–ö–£–ù–î</label></div></div></div>`; 
        observeElements(); 
        startTimer(); 
        page.scrollTop = 0;
    }

    if(type==="holidays"){ 
        page.innerHTML=`<div class="card reveal"><h2>–°—á—ë—Ç—á–∏–∫ –¥–Ω–µ–π –¥–æ –∫–∞–Ω–∏–∫—É–ª</h2><div class="timer-wrapper"><div class="time-box"><span id="holidaysDays">0</span><label>–î–ù–ï–ô</label></div><div class="time-box"><span id="holidaysHours">0</span><label>–ß–ê–°–û–í</label></div><div class="time-box"><span id="holidaysMinutes">0</span><label>–ú–ò–ù–£–¢</label></div><div class="time-box"><span id="holidaysSeconds">0</span><label>–°–ï–ö–£–ù–î</label></div></div></div>`; 
        observeElements(); 
        startHolidaysTimer(); 
        page.scrollTop = 0;
    }

    if(type==="schedule"){ 
        page.innerHTML=`<div class="card reveal"><h2>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
            <div class="schedule-grid">
                <div class="schedule-item">
                    <p>üìö –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤</p>
                    <img src="schedule1.jpg" onclick="openImage('schedule1.jpg')" alt="–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–æ–≤">
                </div>
                <div class="schedule-item">
                    <p>üîî –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤</p>
                    <img src="schedule2.jpg" onclick="openImage('schedule2.jpg')" alt="–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤">
                </div>
            </div>
        </div>`; 
        observeElements(); 
        page.scrollTop = 0;
    }

    if(type==="food"){
        let foodHTML = `<div class="card"><h2>–ú–µ–Ω—é</h2><div class="food-container">`;
        cycles.forEach((cycle, index) => {
            const breakfastTextSafe = escapeHTML(cycle.breakfastText);
            const lunchTextSafe = escapeHTML(cycle.lunchText);
            foodHTML += `
                <div class="food-cycle reveal">
                    <h3>üçΩÔ∏è –¶–∏–∫–ª –ø–∏—Ç–∞–Ω–∏—è ${index+1}</h3>
                    <div class="meal">
                        <h4 class="meal-title">–ó–∞–≤—Ç—Ä–∞–∫</h4>
                        <img src="${cycle.breakfastImg}" onclick="openImage('${cycle.breakfastImg}')" alt="–ó–∞–≤—Ç—Ä–∞–∫ —Ü–∏–∫–ª ${index+1}">
                        <p>${breakfastTextSafe}</p>
                    </div>
                    <div class="meal">
                        <h4 class="meal-title">–û–±–µ–¥</h4>
                        <img src="${cycle.lunchImg}" onclick="openImage('${cycle.lunchImg}')" alt="–û–±–µ–¥ —Ü–∏–∫–ª ${index+1}">
                        <p>${lunchTextSafe}</p>
                    </div>
                </div>
            `;
        });
        foodHTML += `</div></div>`;
        page.innerHTML = foodHTML;
        observeElements();
        page.scrollTop = 0;
    }
}

function closePage(){ 
    page.classList.remove("active"); 
    page.innerHTML = ""; 
    page.scrollTop = 0;
    main.style.display = "flex"; 
    backBtn.style.display = "none"; 
    clockEl.style.display = "block"; 
    timerEl.style.display = "block";
    clearInterval(timerInterval); 
    clearInterval(holidaysTimerInterval); 
    clearTimeout(idleTimeout); 
}

// ===== –ù–æ–≤–æ—Å—Ç–∏ VK =====
function loadNews(){ const script=document.createElement("script"); script.src=`https://api.vk.com/method/wall.get?owner_id=-${GROUP_ID}&count=5&access_token=${TOKEN}&v=5.199&callback=renderNews`; document.body.appendChild(script);}
function renderNews(data){ 
    const container=document.getElementById("newsContainer"); 
    container.innerHTML=""; 
    data.response.items.forEach(post=>{ 
        if(!post.text && !post.attachments) return; 
        const date=new Date(post.date*1000).toLocaleDateString("ru-RU"); 
        let images=""; 
        if(post.attachments){ 
            images+=`<div class="gallery">`; 
            post.attachments.forEach(att=>{if(att.type==="photo"){ const photo=att.photo.sizes.at(-1).url; images+=`<img src="${photo}" onclick="openImage('${photo}')">`;}}); 
            images+=`</div>`;
        } 
        container.innerHTML+=`<div class="news-card reveal"><div class="news-date">${date}</div><div class="news-text">${post.text.replace(/\n/g,"<br>")}</div>${images}</div>`;
    }); 
    observeElements();
    page.scrollTop = 0;
}

// ===== –õ–∞–π—Ç–±–æ–∫—Å =====
function openImage(src){ 
    let lb=document.createElement("div"); 
    lb.className="lightbox"; 
    lb.innerHTML=`<img src="${src}">`; 
    lb.onclick=()=>document.body.removeChild(lb); 
    document.body.appendChild(lb); 
}
</script>
</body>
</html>